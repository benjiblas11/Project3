<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 100 Movies</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .movie-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }
        .movies-header h1 a {
            color: inherit; /* Inherit text color */
            text-decoration: none; /* Remove underline */
        }
    </style>
</head>
<body>
    <!-- Container for movies and filters -->
    <div class="movies-page">
        <!-- Filters section (top) -->
        <div class="movies-header">
            <h1><a href="/movies">Movies</a></h1>
            <div class="filters">

            <!--SEARCH BAR-->
            <form method="GET" action="/search">
                <input type="text" class="search-bar" name="query" placeholder="Search..." required>
                <input type="hidden" name="user_id" value="<%= userId %>">  <!-- Ensure user_id is passed -->
                <!-- <button class="search-btn" type="submit">Search</button> -->
            </form>
            

                <!--DECADE FILTER -->
                <form id="decade-filter-form" method="GET" action="/filterdec">
                    <input type="hidden" name="user_id" value="<%= userId %>"> <!-- Ensure user_id is passed -->
                    <select id="decade-filter" name="year" onchange="this.form.submit()">
                        <option value="all">All Decades</option>
                        <option value="1940">40's</option>
                        <option value="1950">50's</option>
                        <option value="1960">60's</option>
                        <option value="1970">70's</option>
                        <option value="1980">80's</option>
                        <option value="1990">90's</option>
                        <option value="2000">2000's</option>
                        <option value="2010">2010's</option>
                        <option value="2020">2020's</option>
                    </select>
                </form>

                <!--DIRECTOR FILTER -->
                <form id="director-filter-form" method="GET" action="/filterdir">
                    <input type="hidden" name="user_id" value="<%= userId %>"> <!-- Ensure user_id is passed -->
                    <select name="director" id="director" onchange="this.form.submit()">
                        <option value="all">All Directors</option>
                        <option value="Akira Kurosawa">Akira Kurosawa</option>
                        <option value="Alfred Hitchcock">Alfred Hitchcock</option>
                        <option value="Andrew Stanton">Andrew Stanton</option>
                        <option value="Anthony Russo, Joe Russo">Anthony Russo, Joe Russo</option>
                        <option value="Billy Wilder">Billy Wilder</option>
                        <option value="Bob Persichetti, Peter Ramsey, Rodney Rothman">Bob Persichetti, Peter Ramsey, Rodney Rothman</option>
                        <option value="Bong Joon Ho">Bong Joon Ho</option>
                        <option value="Brian De Palma">Brian De Palma</option>
                        <option value="Bryan Singer">Bryan Singer</option>
                        <option value="Charles Chaplin">Charles Chaplin</option>
                        <option value="Charlie Chaplin">Charlie Chaplin</option>
                        <option value="Christopher Nolan">Christopher Nolan</option>
                        <option value="Damien Chazelle">Damien Chazelle</option>
                        <option value="Darren Aronofsky">Darren Aronofsky</option>
                        <option value="David Fincher">David Fincher</option>
                        <option value="David Lean">David Lean</option>
                        <option value="Elem Klimov">Elem Klimov</option>
                        <option value="Fernando Meirelles, Kátia Lund">Fernando Meirelles, Kátia Lund</option>
                        <option value="Florian Henckel von Donnersmarck">Florian Henckel von Donnersmarck</option>
                        <option value="Francis Ford Coppola">Francis Ford Coppola</option>
                        <option value="Frank Capra">Frank Capra</option>
                        <option value="Frank Darabont">Frank Darabont</option>
                        <option value="George Lucas">George Lucas</option>
                        <option value="Giuseppe Tornatore">Giuseppe Tornatore</option>
                        <option value="Gus Van Sant">Gus Van Sant</option>
                        <option value="Hayao Miyazaki">Hayao Miyazaki</option>
                        <option value="Irvin Kershner">Irvin Kershner</option>
                        <option value="Isao Takahata">Isao Takahata</option>
                        <option value="James Cameron">James Cameron</option>
                        <option value="John Lasseter">John Lasseter</option>
                        <option value="Jonathan Demme">Jonathan Demme</option>
                        <option value="Joseph Kosinski">Joseph Kosinski</option>
                        <option value="Lana Wachowski, Lilly Wachowski">Lana Wachowski, Lilly Wachowski</option>
                        <option value="Lee Unkrich, Adrian Molina">Lee Unkrich, Adrian Molina</option>
                        <option value="Luc Besson">Luc Besson</option>
                        <option value="Makoto Shinkai">Makoto Shinkai</option>
                        <option value="Martin Scorsese">Martin Scorsese</option>
                        <option value="Masaki Kobayashi">Masaki Kobayashi</option>
                        <option value="Mel Gibson">Mel Gibson</option>
                        <option value="Michael Curtiz">Michael Curtiz</option>
                        <option value="Michael Mann">Michael Mann</option>
                        <option value="Michel Gondry">Michel Gondry</option>
                        <option value="Milos Forman">Milos Forman</option>
                        <option value="Nadine Labaki">Nadine Labaki</option>
                        <option value="Olivier Nakache, Éric Toledano">Olivier Nakache, Éric Toledano</option>
                        <option value="Park Chan-wook">Park Chan-wook</option>
                        <option value="Peter Jackson">Peter Jackson</option>
                        <option value="Quentin Tarantino">Quentin Tarantino</option>
                        <option value="Rajkumar Hirani">Rajkumar Hirani</option>
                        <option value="Richard Marquand">Richard Marquand</option>
                        <option value="Ridley Scott">Ridley Scott</option>
                        <option value="Roberto Benigni">Roberto Benigni</option>
                        <option value="Robert Zemeckis">Robert Zemeckis</option>
                        <option value="Roger Allers, Rob Minkoff">Roger Allers, Rob Minkoff</option>
                        <option value="Roman Polanski">Roman Polanski</option>
                        <option value="Sam Mendes">Sam Mendes</option>
                        <option value="Sergio Leone">Sergio Leone</option>
                        <option value="Sidney Lumet">Sidney Lumet</option>
                        <option value="Stanley Kubrick">Stanley Kubrick</option>
                        <option value="Steven Spielberg">Steven Spielberg</option>
                        <option value="Thomas Kail">Thomas Kail</option>
                        <option value="Thomas Vinterberg">Thomas Vinterberg</option>
                        <option value="T.J. Gnanavel">T.J. Gnanavel</option>
                        <option value="Todd Phillips">Todd Phillips</option>
                        <option value="Tony Kaye">Tony Kaye</option>
                    </select>
                </form>

                
                <!-- RATING FILTER -->
                <form id="rating-filter-form" method="GET" action="/filterrat">
                    <input type="hidden" name="user_id" value="<%= userId %>">  <!-- Ensure user_id is passed -->
                    <select id="mpaa-rating-filter" name="mpaa_rating" onchange="this.form.submit()">
                        <option value="all">All MPAA Ratings</option>
                        <option value="G">G</option>
                        <option value="PG">PG</option>
                        <option value="PG-13">PG-13</option>
                        <option value="R">R</option>
                        <option value="NR">NR</option>
                        <option value="Approved">Approved</option>
                    </select>
                </form>
                

            <!-- UNWATCHED FILTER -->
            <form id="unwatched-filter-form" method="GET" action="/filterunwatched">
                <input type="hidden" name="user_id" value="<%= userId %>">
                <label>
                    <input type="checkbox" name="unwatched" value="true" <%= unwatched === 'true' ? 'checked' : '' %> onchange="this.form.submit()"> Unwatched
                </label>
            </form>
            </div>
        </div>

        <!-- Movies section -->
        <div class="movies-grid" id="movies-section" style="overflow-y: auto; max-height: calc(100vh - 150px);">
            <% if (movie_info.length > 0) { %>
                <% movie_info.forEach(movie => { %>
                    <div class="movie-card">
                        <div class="movie-rank"><%= movie.movie_rank %></div>
                        <a href="/view_movie/<%= movie.movie_rank %>">
                            <img src="<%= movie.image_url %>" alt="<%= movie.title %>" class="movie-poster">
                        </a>
                        <h2><%= movie.title %></h2>
                        <div class="movie-checkbox">
                            <form action="/update_status" method="POST">
                                <input type="hidden" name="movie_rank" value="<%= movie.rank %>">

                            </form>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div>No movies available</div>
            <% } %>
        </div>
    </div>
</body>
</html>